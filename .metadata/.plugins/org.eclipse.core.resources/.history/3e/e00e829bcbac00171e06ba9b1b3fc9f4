package il.co.bgurent.pageobject;


import java.util.ArrayList;
import java.util.List;

import org.junit.Assert;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;

public class MainPage extends BasePage {

	// FILEDS
	boolean isPresent = false;
	// Loader
	WebElement mainLoader;
	WebElement loaderLable;
	// Login \ Regiter
	WebElement loginView;
	WebElement registerView;
	// Top nav-bar
	/*
	 * language 
	 * favorites
	 * contact us
	 * about
	 * home.main
	 */
	List<WebElement> langControl = new ArrayList<WebElement>();
	WebElement favoritesView;
	WebElement contactUsView;
	WebElement aboutView;
	WebElement mainView;
	
	// CONSTRUCTOR
	public MainPage(WebDriver driver) {
		super(driver);
		 this.mainLoader = 
				 driver.findElement(By.cssSelector("i.welcome-load.loader"));
		this.loaderLable = 
				mainLoader.findElement(By.cssSelector());
		 this.loginView = 
				 driver.findElement(By.xpath("//*/a[@ui-sref='home.login']"));
		 this.registerView = 
				 driver.findElement(By.xpath("//*/a[@ui-sref='home.register']"));
		 this.langControl = 
				 driver.findElements(By.cssSelector("ul.dropdown-menu"));
		 this.favoritesView =
				 driver.findElement(By.xpath("//*/a[@ui-sref='home.favorites']"));
		 this.contactUsView = 
				 driver.findElement(By.xpath("//*/a[@ui-sref='home.contact']"));
		 this.aboutView = 
				 driver.findElement(By.xpath("//*/a[@ui-sref='home.about']"));
		 this.mainView = 
				 driver.findElement(By.cssSelector("a.navbar-brand"));
		 
	}
	
	// PUBLIC METHODS
	public void isLoaderDispayed() {
		Assert.assertEquals("BGU Rent", loaderLable.getText());
		Assert.assertTrue(waitUntilElementLocatedByClassName(mainLoader.getAttribute("class")));
	}
	// Navigate to Login Page View
	public void navToLoginView() {
		try {
			if(loginView.isDisplayed()) {
				loginView.click();
			}
			else {
				isPresent = waitUntilElementLocatedByXPath("//*/a[@ui-sref='home.login']");
				if(isPresent) {
					loginView.click();
				}
				else {
					System.out.println("Element doesn't exists!");
				}
			}
		}
		catch (Exception ex) {
			ex.printStackTrace();
		}
	}
	// Navigate to Register Page View
	public void navToRegisterView() {
		try {
			if(registerView.isDisplayed()) {
				registerView.click();
			}
			else {
				isPresent = waitUntilElementLocatedByXPath("//*/a[@ui-sref='home.register']");
				if(isPresent) {
					registerView.click();
				}
				else {
					System.out.println("Element doesn't exists!");
				}
			}
		}
		catch (Exception ex) {
			ex.printStackTrace();
		}
	}
	// Changes Language to Heb
	public void changeLangToHebrew() {
		try {
			if(langControl != null) {
				System.out.println(langControl);
			}
		}
		catch (Exception ex) {
			ex.printStackTrace();
		}
	}
	//Changes Language to Eng
	public void changeLangToEnglish() {
		
	}
	
	
}
