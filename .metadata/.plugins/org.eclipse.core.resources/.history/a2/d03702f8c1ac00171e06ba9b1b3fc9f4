package il.co.bgurent.pageobject;


import java.util.ArrayList;
import java.util.List;

import org.junit.Assert;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;

public class MainPage extends BasePage {

	// FILEDS
	boolean isPresent = false;
	
	WebElement mainLoader;
	WebElement loaderLable;
	WebElement loginView;
	WebElement registerView;
	// Top nav-bar
	List<WebElement> langControl = new ArrayList<WebElement>();
	WebElement favoritesView;
	
	// CONSTRUCTOR
	public MainPage(WebDriver driver) {
		super(driver);
		 this.mainLoader = 
				 driver.findElement(By.cssSelector("i.welcome-load.loader"));
		this.loaderLable = 
				driver.findElement(By.cssSelector("i>lable"));
		 this.loginView = 
				 driver.findElement(By.xpath("//*/a[@ui-sref='home.login']"));
		 this.registerView = 
				 driver.findElement(By.xpath("//*/a[@ui-sref='home.register']"));
		 this.langControl = 
				 driver.findElements(By.cssSelector("ul.dropdown-menu"));
		 this.favoritesView =
				 driver.findElement(By.xpath("//*/a[@ui-sref='home.favorites']"));
		 
	}
	
	// PUBLIC METHODS
	public void isLoaderDispayed() {
		Assert.assertEquals("BGU Rent", loaderLable.getText());
		Assert.assertTrue(waitUntilElementLocatedByClassName(mainLoader.getAttribute("class")));
	}
	
	public void navToLoginView() {
		try {
			if(loginView.isDisplayed()) {
				loginView.click();
			}
			else {
				isPresent = waitUntilElementLocatedByXPath("//*/a[@ui-sref='home.login']");
				if(isPresent) {
					loginView.click();
				}
				else {
					System.out.println("Element doesn't exists!");
				}
			}
		}
		catch (Exception ex) {
			ex.printStackTrace();
		}
	}
	
}
