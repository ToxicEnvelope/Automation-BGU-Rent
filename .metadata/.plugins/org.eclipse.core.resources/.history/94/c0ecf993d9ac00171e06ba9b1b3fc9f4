package il.co.bgurent.pageobject;


import java.util.ArrayList;
import java.util.List;

import org.junit.Assert;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;

public class MainPage extends BasePage {

	// FILEDS
	boolean isPresent = false;
	// Loader
	WebElement mainLoader;
	WebElement loaderLabel;
	// Login \ Regiter
	WebElement loginView;
	WebElement registerView;
	// Top nav-bar
	/*
	 * language 
	 * favorites
	 * contact us
	 * about
	 * home.main
	 */
	List<WebElement> langControl = new ArrayList<WebElement>();
	WebElement favoritesView;
	WebElement contactUsView;
	WebElement aboutView;
	WebElement mainView;
	
	// CONSTRUCTOR
	public MainPage(WebDriver driver) {
		super(driver);
		 this.mainLoader = 
				 driver.findElement(By.cssSelector("i.welcome-load.loader"));
		this.loaderLabel = 
				mainLoader.findElement(By.cssSelector("label"));
		 this.loginView = 
				 driver.findElement(By.xpath("//*/a[@ui-sref='home.login']"));
		 this.registerView = 
				 driver.findElement(By.xpath("//*/a[@ui-sref='home.register']"));
		 this.langControl = 
				 driver.findElement(By.cssSelector("ul.dropdown-menu"))
				 	   				.findElements(By.cssSelector("li"));
		 this.favoritesView =
				 driver.findElement(By.xpath("//*/a[@ui-sref='home.favorites']"));
		 this.contactUsView = 
				 driver.findElement(By.xpath("//*/a[@ui-sref='home.contact']"));
		 this.aboutView = 
				 driver.findElement(By.xpath("//*/a[@ui-sref='home.about']"));
		 this.mainView = 
				 driver.findElement(By.cssSelector("a.navbar-brand"));
		 
	}
	
	// GETTERS
	public WebElement getMainLoader() {
		return mainLoader;
	}
	public WebElement getLoaderLabel() {
		return loaderLabel;
	}
	public WebElement getLoginView() {
		return loginView;
	}
	public WebElement getRegisterView() {
		return registerView;
	}
	public List<WebElement> getLanguageControl() {
		return langControl;
	}
	public WebElement getFavoritesView() {
		return favoritesView;
	}
	public WebElement getContactUsView() {
		return contactUsView;
	}
	public WebElement getAboutView() {
		return aboutView;
	}
	public WebElement getMainView() {
		return mainView;
	}
	// PUBLIC METHODS
	public void isLoaderDispayed() {
		Assert.assertTrue(waitUntilElementLocatedByClassName(mainLoader.getAttribute("class")));
	}
	// Navigate to Login Page View
	public void navToLoginView() {
		try {
			if(loginView.isDisplayed()) {
				click(loginView);
			}
			else {
				isPresent = waitUntilElementLocatedByXPath("//*/a[@ui-sref='home.login']");
				if(isPresent) {
					click(loginView);
				}
				else {
					System.out.println("Element doesn't exists!");
				}
			}
		}
		catch (Exception ex) {
			ex.printStackTrace();
		}
	}
	// Navigate to Main Page
	public void navToMainPage() {
		try {
			if(mainView.isDisplayed()) {
				click(mainView);
			}
			else {
				isPresent = waitUntilElementLocatedByXPath("//*/a[@ui-sref='home.main']");
				if(isPresent) {
					click(mainView);
				}
				else {
					System.out.println("Element doesn't exists!");
				}
			}
		}
		catch (Exception ex) {
				ex.printStackTrace();
		}
	}
	// Navigate to Register Page View
	public void navToRegisterView() {
		try {
			if(registerView.isDisplayed()) {
				click(registerView);
			}
			else {
				isPresent = waitUntilElementLocatedByXPath("//*/a[@ui-sref='home.register']");
				if(isPresent) {
					click(registerView);
				}
				else {
					System.out.println("Element doesn't exists!");
				}
			}
		}
		catch (Exception ex) {
			ex.printStackTrace();
		}
	}
	// Changes Language to Heb
	public void changeLangToHebrew() {
		try {
			if(langControl != null) {
				click();
				WebElement elem = langControl.get(0);
				if(elem.isDisplayed()) {
					click(elem);
				}
			}
		}
		catch (Exception ex) {
			ex.printStackTrace();
		}
	}
	//Changes Language to Eng
	public void changeLangToEnglish() {
		
	}
}
